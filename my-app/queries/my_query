-- Run these commands in PostgreSQL client

-- Create "carts" table
CREATE TYPE cart_status AS ENUM ('OPEN', 'ORDERED');

CREATE TABLE carts (
  id UUID PRIMARY KEY,
  user_id UUID NOT NULL,
  created_at DATE NOT NULL,
  updated_at DATE NOT NULL,
  status cart_status NOT NULL
);

-- Create "cart_items" table
CREATE TABLE cart_items (
  cart_id UUID,
  product_id UUID,
  count INTEGER,
  PRIMARY KEY (cart_id, product_id),
  FOREIGN KEY (cart_id) REFERENCES carts(id)
);